"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[601],{4601:(e,s,i)=>{i.r(s),i.d(s,{default:()=>L});var a=i(5043),t=i(8309);const r="TrackList_trecksListContainer__SY0dK",n="TrackList_yearContainer__pwbXB",c="TrackList_yearHeader__4X4Lq",l="TrackList_tracksContainer__sLn67";var d=i(3488),o=i(8514),m=i(459),u=i(4082);const p=(0,m.J1)("\nquery GetTracks($i:TrackListInput!) {\n  esTrackList(input: $i){\n    items {\n    is_active\n    is_visible\n    max_participants\n    track_id\n    is_signed\n    name\n    sign_count\n    file\n    data\n    disciplines{\n      discipline_id\n      name\n    }\n    }\n  }\n}\n");var _=i(4536),v=i(8387),h=i(5728),k=i(4782),f=i(579);const y=e=>{let{type:s,id:i,is_signed:a,is_visible:t,handleNavigate:r,name:n,styles:c,active:l=!1,role:d=!1,nameSpec:o,is_active:m}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:(0,v.A)({"card-discipline-pathway":!0,"card-discipline-pathway_active":a,"unvisible-card":!t}),style:c,onClick:e=>(e=>{"student"===d||"student-rakus"===d?r(e).then((e=>console.log("success"))).catch((e=>console.log(e))):r(e)})(e),children:[(0,f.jsx)("div",{className:"card-discipline-pathway__title-wrapper",children:(0,f.jsx)("div",{className:"card-discipline-pathway__name",style:{width:"100%"},children:(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[n,(0,f.jsx)("div",{className:"moderStatusesWrapElective",children:!!a&&(0,f.jsx)(h.A,{children:(0,f.jsx)(_.iQ6,{style:{color:"#7671DD",fontSize:"1.5rem",marginLeft:".5rem"}}),placement:k.e.bottom,title:"\u0412\u044b \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b"})})]})})}),(0,f.jsx)("div",{className:"card-discipline-pathway__type",children:s})]})})},j=e=>{let{role:s,nameSpec:i,currentUserId:m}=e;const[_,v]=(0,a.useState)({}),h=(0,o.A)(),k={filter:"student"===s||"student-rakus"===s?{namespec:i.namespec,department:i.department_name,nameprof:i.nameprof,group:i.group,course:i.course,student_id:m,recordbook:i.recordbook,eform:i.eform,is_moderator:!1,elevel:i.elevel}:{is_moderator:!0},pagination:{offset:0,limit:1e3},sort:[{column:"is_visible",order:"desc"},{column:"created",order:"desc"}]},{data:j,error:x,loading:g,refetch:b}=(T=k,(0,u.IT)(p,{variables:{i:T}}));var T;console.log("data",j),(0,a.useEffect)((()=>{b()}),[b]),(0,a.useEffect)((()=>{var e;if(null!==j&&void 0!==j&&null!==(e=j.esTrackList)&&void 0!==e&&e.items){const e=j.esTrackList.items.map((e=>e.data.recruitmentYear)).sort(((e,s)=>s-e))[0];e&&v({[e]:!0})}}),[j]);const L=(0,a.useMemo)((()=>{var e;if(g)return(0,f.jsx)(t.Z,{});if(x)return(0,f.jsx)("div",{children:"..error.."});if(null!==j&&void 0!==j&&null!==(e=j.esTrackList)&&void 0!==e&&e.items){const e=j.esTrackList.items.reduce(((e,s)=>{const i=s.data.recruitmentYear;return e[i]||(e[i]=[]),e[i].push(s),e}),{});return Object.keys(e).sort(((e,s)=>s-e)).map((a=>(0,f.jsxs)("section",{className:n,children:[s!==d.f.STUDENT&&(0,f.jsxs)("header",{className:c,onClick:()=>v((e=>({...e,[a]:!e[a]}))),children:["\u0413\u043e\u0434 \u043d\u0430\u0431\u043e\u0440\u0430: ",a]}),_[a]&&(0,f.jsx)("div",{className:l,children:e[a].map((e=>(0,f.jsx)(y,{name:e.name,type:"\u0422\u0440\u0435\u043a",role:s,is_visible:e.is_visible,is_signed:e.is_signed,id:e.track_id,is_active:e.is_active,handleNavigate:()=>{h("/tracks-details")},nameSpec:i},e.track_id)))})]},a)))}return null}),[j,x,g,s,i,_]);return(0,f.jsx)("div",{className:r,children:L})};var x=i(4823),g=i(3003);const b="TracksPage_main__IlWak";var T=i(1059);const L=()=>{const e=(0,g.d4)((e=>e.auth.me.data.guid)),s=(0,T.A)();return(0,f.jsxs)(x.O,{className:b,children:[(0,f.jsx)(j,{nameSpec:"10.05.05 - \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439 \u0432 \u043f\u0440\u0430\u0432\u043e\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0444\u0435\u0440\u0435",role:s,currentUserId:e}),","]})}}}]);
//# sourceMappingURL=601.cd7ab903.chunk.js.map